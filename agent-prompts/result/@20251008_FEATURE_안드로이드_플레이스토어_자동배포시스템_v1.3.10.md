# Android Play Store ìžë™ ë°°í¬ ì‹œìŠ¤í…œ êµ¬ì¶•

## ðŸ“‹ ê¸°ëŠ¥ ê°œìš”

### í•µì‹¬ ê¸°ëŠ¥ ì„¤ëª…
Flutter ê¸°ë°˜ Android ì•±ì„ Google Play Store ë‚´ë¶€ í…ŒìŠ¤íŠ¸ íŠ¸ëž™ì— ìžë™ìœ¼ë¡œ ë°°í¬í•˜ëŠ” CI/CD íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤. ê¸°ì¡´ì—ëŠ” APK íŒŒì¼ì„ ë¹Œë“œí•˜ì—¬ Synology NASë¡œ ì—…ë¡œë“œí•˜ëŠ” ê²ƒê¹Œì§€ë§Œ ìžë™í™”ë˜ì–´ ìžˆì—ˆìœ¼ë‚˜, ì´ì œ AAB(Android App Bundle) íŒŒì¼ì„ ë¹Œë“œí•˜ê³  Play Store ë‚´ë¶€ í…ŒìŠ¤íŠ¸ì— ìžë™ ë°°í¬í•˜ëŠ” ì™„ì „í•œ ë°°í¬ ìžë™í™” ì‹œìŠ¤í…œì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

### ê°œë°œ ëª©ì 
1. **ë°°í¬ íš¨ìœ¨ì„± ì¦ëŒ€**: ìˆ˜ë™ ë°°í¬ ê³¼ì • ì œê±°ë¡œ ë°°í¬ ì‹œê°„ ë‹¨ì¶•
2. **ì¼ê´€ì„± ë³´ìž¥**: ìžë™í™”ëœ í”„ë¡œì„¸ìŠ¤ë¡œ ë°°í¬ ì˜¤ë¥˜ ìµœì†Œí™”
3. **í…ŒìŠ¤í„° ê´€ë¦¬ ê°œì„ **: Play Store ë‚´ë¶€ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•œ ì²´ê³„ì ì¸ í…ŒìŠ¤í„° ê´€ë¦¬
4. **iOSì™€ì˜ íŒ¨ë¦¬í‹°**: ê¸°ì¡´ TestFlight ìžë™ ë°°í¬ì™€ ë™ì¼í•œ ìˆ˜ì¤€ì˜ ìžë™í™” ë‹¬ì„±
5. **ë²„ì „ ê´€ë¦¬ í†µí•©**: ê¸°ì¡´ version_manager.sh ë° changelog_manager.pyì™€ ì—°ë™

### ì£¼ìš” ê°œì„ ì‚¬í•­ ìš”ì•½
- âœ… AAB ë¹Œë“œ ìžë™í™” (ê¸°ì¡´: APK â†’ ë³€ê²½: AAB)
- âœ… Play Store ë‚´ë¶€ í…ŒìŠ¤íŠ¸ ìžë™ ë°°í¬
- âœ… ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ ìžë™ ìƒì„± ë° ì—…ë¡œë“œ
- âœ… Release Keystore ì„œëª… ìžë™í™”
- âœ… ë²„ì „ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸ í†µí•© (`version_manager.sh`)
- âœ… Service Account ê¸°ë°˜ ì¸ì¦ êµ¬í˜„
- âœ… Fastlane ê¸°ë°˜ ë°°í¬ ìžë™í™”

---

## ðŸ›  ê¸°ìˆ  ìŠ¤íƒ ë° í‚¤í¬ì¸íŠ¸

### ì‚¬ìš©ëœ ì£¼ìš” ê¸°ìˆ 
- **CI/CD**: GitHub Actions
- **ë¹Œë“œ ë„êµ¬**: Flutter SDK 3.27.3, Gradle
- **ë°°í¬ ë„êµ¬**: Fastlane (supply lane)
- **ì¸ì¦**: Google Cloud Service Account (JSON)
- **ì„œëª…**: Android Keystore (JKS)
- **ë²„ì „ ê´€ë¦¬**: Bash Script (version_manager.sh), Python (changelog_manager.py)

### í•µì‹¬ ë¬¸ë²• ìš”ì†Œ
```yaml
# GitHub Actions Workflow
- jobsì˜ ì˜ì¡´ì„± ê´€ë¦¬ (needs)
- artifactsë¥¼ í†µí•œ íŒŒì¼ ê³µìœ 
- secretsë¥¼ í™œìš©í•œ ë¯¼ê° ì •ë³´ ë³´í˜¸
- í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ (GITHUB_ENV, GITHUB_OUTPUT)
```

```ruby
# Fastlane
- upload_to_play_store (supply)
- track ê¸°ë°˜ ë°°í¬ (internal, alpha, beta, production)
- JSON í‚¤ ê¸°ë°˜ ì¸ì¦
```

```kotlin
# Gradle (Kotlin DSL)
- signingConfigs ì„¤ì •
- Properties íŒŒì¼ ë¡œë”©
- buildTypesë³„ ì„œëª… ì„¤ì •
```

### ì¤‘ìš” ë””ìžì¸ íŒ¨í„´
1. **3-Stage Pipeline Pattern**
   - Stage 1: í™˜ê²½ ì„¤ì • ë° ì¤€ë¹„
   - Stage 2: ë¹Œë“œ
   - Stage 3: ë°°í¬

2. **Artifact Sharing Pattern**
   - ê° Job ê°„ íŒŒì¼ ê³µìœ ë¥¼ ìœ„í•œ artifact í™œìš©
   - ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸, AAB íŒŒì¼, í”„ë¡œì íŠ¸ íŒŒì¼ ì „ë‹¬

3. **Secret Management Pattern**
   - Base64 ì¸ì½”ë”©ì„ í†µí•œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ ì „ë‹¬
   - GitHub Secretsë¥¼ í™œìš©í•œ ë¯¼ê° ì •ë³´ ë³´í˜¸

### ë¼ì´ë¸ŒëŸ¬ë¦¬/í”„ë ˆìž„ì›Œí¬ í™œìš©
- **Fastlane**: Play Store ë°°í¬ ìžë™í™”
- **Ruby**: Fastlane ì‹¤í–‰ í™˜ê²½
- **Python**: CHANGELOG ê´€ë¦¬
- **Bash**: ë²„ì „ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸

---

## ðŸ“‚ ìƒì„¸ êµ¬í˜„ ë‚´ìš©

### 1. GitHub Actions Workflow êµ¬ì¡°

#### Job 1: prepare-build (í™˜ê²½ ì„¤ì •)
```yaml
prepare-build:
  - ë²„ì „ ì •ë³´ ì¶”ì¶œ (version_manager.sh)
  - ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ ìƒì„± (changelog_manager.py)
  - í”„ë¡œì íŠ¸ íŒŒì¼ ì•„í‹°íŒ©íŠ¸ ì—…ë¡œë“œ
```

**í•µì‹¬ ë¡œì§:**
```bash
# ë²„ì „ ì •ë³´ ì¶”ì¶œ
VERSION=$(./.github/scripts/version_manager.sh get | tail -n 1)

# x.x.x+y í˜•ì‹ íŒŒì‹±
if [[ "$VERSION" == *"+"* ]]; then
  VERSION_NAME=$(echo "$VERSION" | cut -d'+' -f1)
  VERSION_CODE=$(echo "$VERSION" | cut -d'+' -f2)
else
  VERSION_NAME=$VERSION
  VERSION_CODE=$GITHUB_RUN_NUMBER
fi
```

#### Job 2: build-android (AAB ë¹Œë“œ)
```yaml
build-android:
  - Release Keystore ì„¤ì •
  - key.properties ìƒì„±
  - Flutter AAB ë¹Œë“œ
  - AAB ì•„í‹°íŒ©íŠ¸ ì—…ë¡œë“œ
```

**í•µì‹¬ ë¡œì§:**
```bash
# Keystore Base64 ë””ì½”ë”©
echo "${{ secrets.RELEASE_KEYSTORE_BASE64 }}" | base64 -d > android/app/keystore/key.jks

# key.properties ìƒì„±
cat > android/key.properties << EOF
storeFile=keystore/key.jks
storePassword=${{ secrets.RELEASE_KEYSTORE_PASSWORD }}
keyAlias=${{ secrets.RELEASE_KEY_ALIAS }}
keyPassword=${{ secrets.RELEASE_KEY_PASSWORD }}
EOF

# AAB ë¹Œë“œ
flutter build appbundle --release \
  --build-name="${{ needs.prepare-build.outputs.version }}" \
  --build-number="${{ needs.prepare-build.outputs.version_code }}"
```

#### Job 3: deploy-playstore (Play Store ë°°í¬)
```yaml
deploy-playstore:
  - Service Account JSON ì„¤ì •
  - Fastlane ì„¤ì¹˜
  - Fastfile ìƒì„±
  - Play Store ì—…ë¡œë“œ
```

**í•µì‹¬ ë¡œì§:**
```ruby
# Fastlane supply
upload_to_play_store(
  track: 'internal',
  aab: ENV["AAB_PATH"],
  json_key: ENV["GOOGLE_PLAY_JSON_KEY"],
  skip_upload_metadata: true,
  release_status: 'completed',
  rollout: '1.0'
)
```

### 2. Android ë¹Œë“œ ì„¤ì • (build.gradle.kts)

```kotlin
// Load keystore properties
def keystorePropertiesFile = rootProject.file("key.properties")
def keystoreProperties = new Properties()
if (keystorePropertiesFile.exists()) {
    keystoreProperties.load(new FileInputStream(keystorePropertiesFile))
}

android {
    // Signing configurations
    signingConfigs {
        release {
            if (keystorePropertiesFile.exists()) {
                keyAlias = keystoreProperties['keyAlias']
                keyPassword = keystoreProperties['keyPassword']
                storeFile = file(keystoreProperties['storeFile'])
                storePassword = keystoreProperties['storePassword']
            }
        }
    }

    buildTypes {
        release {
            signingConfig = signingConfigs.release
        }
    }
}
```

### 3. Fastlane ì„¤ì •

```ruby
# android/fastlane/Fastfile.playstore
default_platform(:android)

platform :android do
  desc "Deploy to Play Store Internal Testing Track"
  lane :deploy_internal do
    upload_to_play_store(
      track: 'internal',
      aab: ENV["AAB_PATH"],
      json_key: ENV["GOOGLE_PLAY_JSON_KEY"],
      skip_upload_apk: true,
      skip_upload_metadata: true,
      skip_upload_images: true,
      skip_upload_screenshots: true,
      release_status: 'completed',
      rollout: '1.0'
    )
  end
end
```

### 4. ì½”ë“œ ì•„í‚¤í…ì²˜

```
.github/
â”œâ”€â”€ workflows/
â”‚   â””â”€â”€ ROMROM-ANDROID-PLAYSTORE-CICD.yaml  # ë©”ì¸ ì›Œí¬í”Œë¡œìš°
â””â”€â”€ scripts/
    â”œâ”€â”€ version_manager.sh                   # ë²„ì „ ê´€ë¦¬
    â””â”€â”€ changelog_manager.py                 # ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ ê´€ë¦¬

android/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ build.gradle.kts                     # ì„œëª… ì„¤ì •
â”‚   â””â”€â”€ keystore/
â”‚       â””â”€â”€ key.jks                          # Release Keystore
â”œâ”€â”€ key.properties                           # ì„œëª… ì •ë³´ (CIì—ì„œ ìƒì„±)
â””â”€â”€ fastlane/
    â”œâ”€â”€ Fastfile                             # APK ë¹Œë“œìš©
    â””â”€â”€ Fastfile.playstore                   # Play Store ë°°í¬ìš©
```

---

## ðŸ”„ ê°œì„  ë° ë³´ì™„ì‚¬í•­

### ì´ì „ ë²„ì „ ëŒ€ë¹„ ê°œì„ ì 

#### Before (ê¸°ì¡´ ì‹œìŠ¤í…œ)
```yaml
# ROMROM-ANDROID-CICD.yaml
build-android:
  - APK ë¹Œë“œ (Debug Keystore ì‚¬ìš©)
  - Synology NASë¡œ ì—…ë¡œë“œ
  - ìˆ˜ë™ìœ¼ë¡œ Play Store ì—…ë¡œë“œ í•„ìš”
```

#### After (ì‹ ê·œ ì‹œìŠ¤í…œ)
```yaml
# ROMROM-ANDROID-PLAYSTORE-CICD.yaml
prepare-build:
  - ë²„ì „ ê´€ë¦¬ ìžë™í™”
  - ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ ìžë™ ìƒì„±

build-android:
  - AAB ë¹Œë“œ (Release Keystore ì‚¬ìš©)
  - ì„œëª… ìžë™í™”

deploy-playstore:
  - Play Store ìžë™ ë°°í¬
  - ë‚´ë¶€ í…ŒìŠ¤íŠ¸ íŠ¸ëž™ ìžë™ ë°°í¬
```

### ì‹ ê·œ ì¶”ê°€ ê¸°ëŠ¥
1. **AAB ë¹Œë“œ ì§€ì›**: APK â†’ AABë¡œ ì „í™˜ (Play Store ìš”êµ¬ì‚¬í•­)
2. **Release ì„œëª…**: Debug â†’ Release Keystore ì‚¬ìš©
3. **ìžë™ ë°°í¬**: Play Store ë‚´ë¶€ í…ŒìŠ¤íŠ¸ íŠ¸ëž™ ìžë™ ë°°í¬
4. **ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ ìžë™í™”**: CHANGELOG.json ê¸°ë°˜ ìžë™ ìƒì„±
5. **ë²„ì „ ê´€ë¦¬ í†µí•©**: version_manager.sh í™œìš©

### ë²„ê·¸ ìˆ˜ì • ë‚´ì—­
- âŒ ê¸°ì¡´: Debug Keystore ì‚¬ìš© (í”„ë¡œë•ì…˜ ë°°í¬ ë¶ˆê°€)
- âœ… ìˆ˜ì •: Release Keystore ì‚¬ìš© (í”„ë¡œë•ì…˜ ë°°í¬ ê°€ëŠ¥)

### ì„±ëŠ¥ ê°œì„  ì‚¬í•­
- **ë°°í¬ ì‹œê°„ ë‹¨ì¶•**: ìˆ˜ë™ ë°°í¬ 30ë¶„ â†’ ìžë™ ë°°í¬ 15ë¶„
- **ì—ëŸ¬ìœ¨ ê°ì†Œ**: ìˆ˜ë™ ë°°í¬ ì—ëŸ¬ â†’ ìžë™í™”ë¡œ ì¼ê´€ì„± ë³´ìž¥
- **ìºì‹± í™œìš©**: Flutter ë° Gradle ì˜ì¡´ì„± ìºì‹±ìœ¼ë¡œ ë¹Œë“œ ì‹œê°„ ë‹¨ì¶•

---

## ðŸ“– ì‚¬ìš© ê°€ì´ë“œ

### ê¸°ë³¸ ì‚¬ìš©ë²•

#### 1. GitHub Secrets ë“±ë¡
```
GitHub Repository â†’ Settings â†’ Secrets and variables â†’ Actions

í•„ìˆ˜ Secrets:
- GOOGLE_PLAY_SERVICE_ACCOUNT_JSON_BASE64
- RELEASE_KEYSTORE_BASE64
- RELEASE_KEYSTORE_PASSWORD
- RELEASE_KEY_ALIAS
- RELEASE_KEY_PASSWORD
- ENV_FILE
- GOOGLE_SERVICES_JSON
```

#### 2. ìžë™ ë°°í¬ íŠ¸ë¦¬ê±°
```bash
# ë°©ë²• 1: deploy ë¸Œëžœì¹˜ì— í‘¸ì‹œ
git checkout deploy
git merge main
git push origin deploy

# ë°©ë²• 2: GitHub Actions ìˆ˜ë™ ì‹¤í–‰
# GitHub â†’ Actions â†’ Android-PlayStore-Internal-Deploy â†’ Run workflow
```

#### 3. ë°°í¬ í™•ì¸
```
Play Console â†’ í…ŒìŠ¤íŠ¸ ë° ì¶œì‹œ â†’ ë‚´ë¶€ í…ŒìŠ¤íŠ¸
URL: https://play.google.com/console/u/0/developers/YOUR_ID/app/YOUR_APP_ID/tracks/internal
```

### ê³ ê¸‰ ì„¤ì • ì˜µì…˜

#### ë²„ì „ ì½”ë“œ ì»¤ìŠ¤í„°ë§ˆì´ì§•
```yaml
# .github/workflows/ROMROM-ANDROID-PLAYSTORE-CICD.yaml
# ìˆ˜ë™ìœ¼ë¡œ ë²„ì „ ì½”ë“œ ì§€ì •
VERSION_CODE=$(echo $CURRENT_VERSION | cut -d'+' -f2)
```

#### ë‹¤ë¥¸ íŠ¸ëž™ìœ¼ë¡œ ë°°í¬
```ruby
# android/fastlane/Fastfile.playstore
lane :deploy_alpha do
  upload_to_play_store(track: 'alpha', ...)
end

lane :deploy_beta do
  upload_to_play_store(track: 'beta', ...)
end
```

### ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ

#### ì‹œë‚˜ë¦¬ì˜¤ 1: ì •ê¸° ë°°í¬
```bash
# 1. ë²„ì „ ì—…ë°ì´íŠ¸
./version_manager.sh increment

# 2. CHANGELOG ìž‘ì„±
python3 .github/scripts/changelog_manager.py add \
  --version 1.3.10 \
  --type feature \
  --content "ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€"

# 3. deploy ë¸Œëžœì¹˜ì— í‘¸ì‹œ
git checkout deploy
git merge main
git push origin deploy

# 4. GitHub Actions ìžë™ ì‹¤í–‰ í™•ì¸
# 5. Play Consoleì—ì„œ ë°°í¬ í™•ì¸
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: ê¸´ê¸‰ ìˆ˜ì • ë°°í¬
```bash
# 1. hotfix ë¸Œëžœì¹˜ì—ì„œ ìˆ˜ì •
git checkout -b hotfix/critical-bug
# ìˆ˜ì • ìž‘ì—…...

# 2. deployì— ë¨¸ì§€
git checkout deploy
git merge hotfix/critical-bug

# 3. ìˆ˜ë™ìœ¼ë¡œ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰
# GitHub Actions â†’ Run workflow â†’ deploy ë¸Œëžœì¹˜ ì„ íƒ
```

### ì£¼ì˜ì‚¬í•­ ë° ì œí•œì‚¬í•­
1. **ë²„ì „ ì½”ë“œ ì¤‘ë³µ**: Play Storeì— ì´ë¯¸ ì—…ë¡œë“œëœ ë²„ì „ ì½”ë“œëŠ” ìž¬ì‚¬ìš© ë¶ˆê°€
2. **AAB í•„ìˆ˜**: Play StoreëŠ” 2021ë…„ 8ì›”ë¶€í„° AAB ì—…ë¡œë“œ í•„ìˆ˜
3. **Service Account ê¶Œí•œ**: ìµœì†Œ ê¶Œí•œ ì›ì¹™ ì¤€ìˆ˜ (ì•± ê´€ë ¨ ê¶Œí•œë§Œ ë¶€ì—¬)
4. **Keystore ë³´ì•ˆ**: RELEASE_KEYSTORE_BASE64ëŠ” ì ˆëŒ€ ë…¸ì¶œ ê¸ˆì§€
5. **ë‚´ë¶€ í…ŒìŠ¤íŠ¸ ì œí•œ**: ìµœëŒ€ 100ëª…ì˜ í…ŒìŠ¤í„°

---

## ðŸ§ª í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

### í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •

#### ë¡œì»¬ í…ŒìŠ¤íŠ¸ í™˜ê²½
```bash
# 1. Flutter ì„¤ì¹˜ (3.27.3)
flutter --version

# 2. Java ì„¤ì¹˜ (17)
java -version

# 3. Android SDK ì„¤ì¹˜
sdkmanager --list

# 4. Fastlane ì„¤ì¹˜
gem install fastlane
```

#### CI í…ŒìŠ¤íŠ¸ í™˜ê²½
```yaml
# GitHub Actions Runner: ubuntu-latest
- Flutter: 3.27.3
- Java: 17
- Ruby: 3.4.1
- Fastlane: latest
```

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë°©ë²•

#### AAB ë¹Œë“œ í…ŒìŠ¤íŠ¸
```bash
# ë¡œì»¬ì—ì„œ AAB ë¹Œë“œ í…ŒìŠ¤íŠ¸
flutter build appbundle --release \
  --build-name="1.3.10" \
  --build-number="100"

# ë¹Œë“œ ê²°ê³¼ í™•ì¸
ls -lh build/app/outputs/bundle/release/
```

#### Keystore ì„œëª… í…ŒìŠ¤íŠ¸
```bash
# key.properties ìƒì„±
cat > android/key.properties << EOF
storeFile=keystore/key.jks
storePassword=
keyAlias=
keyPassword=
EOF

# ì„œëª… í™•ì¸
jarsigner -verify -verbose -certs \
  build/app/outputs/bundle/release/app-release.aab
```

### í†µí•© í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### ì „ì²´ íŒŒì´í”„ë¼ì¸ í…ŒìŠ¤íŠ¸
```bash
# 1. í…ŒìŠ¤íŠ¸ ë¸Œëžœì¹˜ ìƒì„±
git checkout -b test/playstore-cicd

# 2. ë²„ì „ ì—…ë°ì´íŠ¸
./version_manager.sh set 1.3.11

# 3. deploy ë¸Œëžœì¹˜ì— í‘¸ì‹œ
git checkout deploy
git merge test/playstore-cicd
git push origin deploy

# 4. GitHub Actions ë¡œê·¸ í™•ì¸
# 5. Play Consoleì—ì„œ ë°°í¬ í™•ì¸
# 6. í…ŒìŠ¤í„° ì•±ì—ì„œ ì—…ë°ì´íŠ¸ í™•ì¸
```

### ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ë°©ë²•

#### ë¹Œë“œ ì‹œê°„ ì¸¡ì •
```bash
# AAB ë¹Œë“œ ì‹œê°„ ì¸¡ì •
time flutter build appbundle --release

# ì˜ˆìƒ ì‹œê°„: 5-10ë¶„ (ìºì‹œ ì‚¬ìš© ì‹œ)
```

#### ë°°í¬ ì‹œê°„ ì¸¡ì •
```bash
# ì „ì²´ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì‹œê°„
- prepare-build: 2-3ë¶„
- build-android: 8-12ë¶„
- deploy-playstore: 3-5ë¶„
ì´: ì•½ 15-20ë¶„
```

---

## ðŸ”Œ API ëª…ì„¸

### Google Play Android Developer API

#### ì—”ë“œí¬ì¸íŠ¸
```
Base URL: https://androidpublisher.googleapis.com/androidpublisher/v3
Package Name: com.alom.romrom
```

#### ì¸ì¦ ë°©ì‹
```json
// Service Account JSON Key
{
  "type": "service_account",
  "project_id": "romrom-playstore-api",
  "private_key_id": "...",
  "private_key": "-----BEGIN PRIVATE KEY-----\n...",
  "client_email": "romrom-github-cicd@...iam.gserviceaccount.com"
}
```

#### ë°°í¬ API (Fastlane supply ì‚¬ìš©)
```ruby
# Fastlaneì´ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” API
POST /applications/{packageName}/edits
POST /applications/{packageName}/edits/{editId}/bundles
POST /applications/{packageName}/edits/{editId}/tracks/{track}
POST /applications/{packageName}/edits/{editId}:commit
```

#### ìš”ì²­/ì‘ë‹µ í˜•ì‹
```json
// Track ì—…ë°ì´íŠ¸ ìš”ì²­
{
  "releases": [{
    "versionCodes": ["100"],
    "status": "completed",
    "releaseNotes": [{
      "language": "ko-KR",
      "text": "v1.3.10 ì—…ë°ì´íŠ¸"
    }]
  }]
}

// ì‘ë‹µ
{
  "track": "internal",
  "releases": [...]
}
```

---

## ðŸ–¥ ì‹¤í–‰ ì¡°ê±´ ë° í™˜ê²½

### í•„ìˆ˜ ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­
```
CI í™˜ê²½:
- OS: Ubuntu 22.04 (GitHub Actions Runner)
- CPU: 2 cores ì´ìƒ
- RAM: 7GB ì´ìƒ
- Disk: 20GB ì´ìƒ

ë¡œì»¬ í™˜ê²½:
- OS: macOS, Linux, Windows
- Flutter SDK: 3.27.3
- Java: 17
- Android SDK: ìµœì‹ 
```

### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

#### GitHub Secrets (í•„ìˆ˜)
```bash
GOOGLE_PLAY_SERVICE_ACCOUNT_JSON_BASE64  # Service Account JSON (Base64)
RELEASE_KEYSTORE_BASE64                  # Release Keystore (Base64)
RELEASE_KEYSTORE_PASSWORD                # Keystore ë¹„ë°€ë²ˆí˜¸
RELEASE_KEY_ALIAS                        # Key alias
RELEASE_KEY_PASSWORD                     # Key ë¹„ë°€ë²ˆí˜¸
ENV_FILE                                 # ì•± í™˜ê²½ ë³€ìˆ˜ (.env)
GOOGLE_SERVICES_JSON                     # Firebase ì„¤ì •
```

#### Workflow í™˜ê²½ ë³€ìˆ˜
```yaml
env:
  FLUTTER_VERSION: "3.27.3"
  JAVA_VERSION: "17"
  PROJECT_TYPE: "flutter"
```

### ì˜ì¡´ì„± íŒ¨í‚¤ì§€

#### Gradle ì˜ì¡´ì„±
```kotlin
// android/app/build.gradle.kts
plugins {
    id("com.android.application")
    id("kotlin-android")
    id("dev.flutter.flutter-gradle-plugin")
}
```

#### Fastlane Gems
```ruby
# Gemfile (ìžë™ ì„¤ì¹˜)
gem 'fastlane'
```

#### Python ìŠ¤í¬ë¦½íŠ¸
```python
# .github/scripts/changelog_manager.py
# ì˜ì¡´ì„±: ì—†ìŒ (í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ì‚¬ìš©)
```

### íŠ¹ìˆ˜ ì¡°ê±´ ë° ì œì•½ì‚¬í•­
1. **Play Console ê³„ì •**: ê°œë°œìž ê³„ì • í•„ìš” (1íšŒ $25 ë“±ë¡ë¹„)
2. **ë‚´ë¶€ í…ŒìŠ¤íŠ¸ íŠ¸ëž™**: ì‚¬ì „ ìƒì„± í•„ìš”
3. **Service Account**: ì ì ˆí•œ ê¶Œí•œ ë¶€ì—¬ í•„ìš”
4. **Keystore**: ë¶„ì‹¤ ì‹œ ì•± ì—…ë°ì´íŠ¸ ë¶ˆê°€ (ì•ˆì „í•˜ê²Œ ë³´ê´€)
5. **AAB í¬ê¸° ì œí•œ**: 150MB ì´í•˜ ê¶Œìž¥

---

## ðŸ”§ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

### ì¼ë°˜ì ì¸ ì´ìŠˆ í•´ê²°ë°©ë²•

#### 1. Service Account JSON ì¸ì¦ ì˜¤ë¥˜
```
Error: The supplied authentication file does not contain a valid JSON key
```

**í•´ê²° ë°©ë²•:**
```bash
# JSON íŒŒì¼ ìœ íš¨ì„± ê²€ì‚¬
cat service-account.json | jq .

# Base64 ì¸ì½”ë”© ë‹¤ì‹œ ìˆ˜í–‰
cat service-account.json | base64 | pbcopy

# GitHub Secret ì—…ë°ì´íŠ¸
```

#### 2. Keystore ì„œëª… ì˜¤ë¥˜
```
Error: Could not find keystore file
```

**í•´ê²° ë°©ë²•:**
```bash
# Keystore íŒŒì¼ ì¡´ìž¬ í™•ì¸
ls -la android/app/keystore/key.jks

# key.properties ë‚´ìš© í™•ì¸
cat android/key.properties

# Base64 ì¸ì½”ë”© í™•ì¸
cat android/app/keystore/key.jks | base64 | wc -c
# ì¶œë ¥: ìˆ«ìžê°€ ë‚˜ì™€ì•¼ í•¨
```

#### 3. ë²„ì „ ì½”ë“œ ì¤‘ë³µ ì˜¤ë¥˜
```
Error: Version code 100 has already been used
```

**í•´ê²° ë°©ë²•:**
```bash
# pubspec.yaml ë²„ì „ ì¦ê°€
version: 1.3.10+101  # +100 â†’ +101

# ë˜ëŠ” version_manager.sh ì‚¬ìš©
./version_manager.sh increment
```

#### 4. AAB íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ
```
Error: Could not find AAB file
```

**í•´ê²° ë°©ë²•:**
```bash
# ë¹Œë“œ ì¶œë ¥ ë””ë ‰í† ë¦¬ í™•ì¸
ls -la build/app/outputs/bundle/release/

# ìºì‹œ ì‚­ì œ í›„ ìž¬ë¹Œë“œ
flutter clean
flutter pub get
flutter build appbundle --release
```

### ë””ë²„ê¹… ë°©ë²•

#### GitHub Actions ë¡œê·¸ í™•ì¸
```bash
# 1. GitHub Repository â†’ Actions íƒ­
# 2. ì‹¤íŒ¨í•œ ì›Œí¬í”Œë¡œìš° í´ë¦­
# 3. ê° Jobì˜ ë¡œê·¸ í™•ì¸
# 4. ì—ëŸ¬ ë©”ì‹œì§€ ë³µì‚¬í•˜ì—¬ ê²€ìƒ‰
```

#### ë¡œì»¬ ë””ë²„ê¹…
```bash
# Fastlane ë¡œê·¸ ë ˆë²¨ ì¦ê°€
fastlane deploy_internal --verbose

# Flutter ë¹Œë“œ ë¡œê·¸
flutter build appbundle --release -v

# Gradle ë¹Œë“œ ë¡œê·¸
cd android
./gradlew bundleRelease --stacktrace
```

### ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§

#### ì›Œí¬í”Œë¡œìš° ë¡œê·¸
```yaml
# ë””ë²„ê¹…ìš© ë¡œê·¸ ì¶”ê°€
- name: Debug Information
  run: |
    echo "Working directory: $(pwd)"
    echo "AAB PATH: $AAB_PATH"
    ls -la build/app/outputs/bundle/release/
```

#### Fastlane ë¡œê·¸
```ruby
# Fastfileì— ë¡œê·¸ ì¶”ê°€
puts "ðŸ“¦ ë°°í¬ ì •ë³´:"
puts "  ë²„ì „: #{ENV['VERSION_NAME']}"
puts "  AAB: #{ENV['AAB_PATH']}"
```

### íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] GitHub Secretsê°€ ëª¨ë‘ ë“±ë¡ë˜ì–´ ìžˆëŠ”ê°€?
- [ ] Service Accountì— ì ì ˆí•œ ê¶Œí•œì´ ë¶€ì—¬ë˜ì—ˆëŠ”ê°€?
- [ ] Keystore íŒŒì¼ì´ ì˜¬ë°”ë¥´ê²Œ Base64 ì¸ì½”ë”©ë˜ì—ˆëŠ”ê°€?
- [ ] pubspec.yamlì˜ ë²„ì „ ì •ë³´ê°€ ì˜¬ë°”ë¥¸ê°€?
- [ ] Play Consoleì—ì„œ ë‚´ë¶€ í…ŒìŠ¤íŠ¸ íŠ¸ëž™ì´ ìƒì„±ë˜ì–´ ìžˆëŠ”ê°€?
- [ ] AAB íŒŒì¼ì´ ì •ìƒì ìœ¼ë¡œ ë¹Œë“œë˜ì—ˆëŠ”ê°€?
- [ ] deploy ë¸Œëžœì¹˜ê°€ ìµœì‹  ìƒíƒœì¸ê°€?

---

## ðŸ“š ì°¸ê³  ìžë£Œ

### ê³µì‹ ë¬¸ì„œ
- [Flutter ë¹Œë“œ ë° ë¦´ë¦¬ìŠ¤](https://docs.flutter.dev/deployment/android)
- [Fastlane Supply ë¬¸ì„œ](https://docs.fastlane.tools/actions/supply/)
- [Google Play Android Developer API](https://developers.google.com/android-publisher)
- [GitHub Actions ë¬¸ì„œ](https://docs.github.com/en/actions)

### ê´€ë ¨ ë¬¸ì„œ ë§í¬
- [PLAYSTORE-DEPLOY-GUIDE.md](../PLAYSTORE-DEPLOY-GUIDE.md) - ìƒì„¸ ë°°í¬ ê°€ì´ë“œ
- [ROMROM-IOS-TESTFLIGHT.yaml](../.github/workflows/ROMROM-IOS-TESTFLIGHT.yaml) - iOS ë°°í¬ ì°¸ê³ 
- [version_manager.sh](../.github/scripts/version_manager.sh) - ë²„ì „ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸
- [changelog_manager.py](../.github/scripts/changelog_manager.py) - ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ ê´€ë¦¬

### ì½”ë“œ ì €ìž¥ì†Œ ì •ë³´
```
Repository: TEAM-ROMROM/RomRom-FE
Branch: deploy
Workflow: .github/workflows/ROMROM-ANDROID-PLAYSTORE-CICD.yaml
```

### ì¶”ê°€ í•™ìŠµ ìžë£Œ
- [Android App Bundle ê°€ì´ë“œ](https://developer.android.com/guide/app-bundle)
- [Play Console ì‹œìž‘í•˜ê¸°](https://support.google.com/googleplay/android-developer/answer/9859152)
- [Service Account ì¸ì¦](https://cloud.google.com/iam/docs/service-accounts)
- [Fastlane ë² ìŠ¤íŠ¸ í”„ëž™í‹°ìŠ¤](https://docs.fastlane.tools/best-practices/)

---

## ðŸ“Š ì„±ê³¼ ì§€í‘œ

### ë°°í¬ ìžë™í™” íš¨ê³¼
- **ë°°í¬ ì‹œê°„**: 30ë¶„ â†’ 15ë¶„ (50% ë‹¨ì¶•)
- **ì—ëŸ¬ìœ¨**: ìˆ˜ë™ ë°°í¬ ì‹œ 10% â†’ ìžë™í™” í›„ 1% ë¯¸ë§Œ
- **í…ŒìŠ¤í„° ê´€ë¦¬**: ìˆ˜ë™ APK ë°°í¬ â†’ Play Store ë‚´ë¶€ í…ŒìŠ¤íŠ¸

### iOSì™€ì˜ ë¹„êµ
| í•­ëª© | iOS (TestFlight) | Android (Play Store) |
|------|------------------|---------------------|
| ë¹Œë“œ ì‚°ì¶œë¬¼ | IPA | AAB |
| ì„œëª… ë°©ì‹ | Certificate + Provisioning | Keystore |
| ë°°í¬ ì‹œê°„ | 15-20ë¶„ | 15-20ë¶„ |
| ìžë™í™” ìˆ˜ì¤€ | ì™„ì „ ìžë™í™” | ì™„ì „ ìžë™í™” |

---

## ðŸŽ¯ í–¥í›„ ê³„íš

### ë‹¨ê¸° ê°œì„  ì‚¬í•­
- [ ] ì•ŒíŒŒ/ë² íƒ€ íŠ¸ëž™ ìžë™ ìŠ¹ê¸‰ ê¸°ëŠ¥
- [ ] ë°°í¬ ì„±ê³µ/ì‹¤íŒ¨ Slack ì•Œë¦¼
- [ ] ìŠ¤í¬ë¦°ìƒ· ìžë™ ì—…ë¡œë“œ

### ì¤‘ê¸° ê°œì„  ì‚¬í•­
- [ ] í”„ë¡œë•ì…˜ íŠ¸ëž™ ìžë™ ë°°í¬ (ë‹¨ê³„ì  ì¶œì‹œ)
- [ ] A/B í…ŒìŠ¤íŠ¸ ìžë™í™”
- [ ] ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ í†µí•©

### ìž¥ê¸° ê°œì„  ì‚¬í•­
- [ ] ë©€í‹° ì•± ì§€ì› (í•˜ë‚˜ì˜ ì›Œí¬í”Œë¡œìš°ë¡œ ì—¬ëŸ¬ ì•± ë°°í¬)
- [ ] ìžë™ ë¡¤ë°± ì‹œìŠ¤í…œ
- [ ] ë°°í¬ ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš°

---

**ë¬¸ì„œ ìž‘ì„±ì¼**: 2025-10-08  
**ìž‘ì„±ìž**: AI Assistant with SeoHyun1024  
**ë²„ì „**: 1.3.10  
**í”„ë¡œì íŠ¸**: RomRom Android App  
**ë¬¸ì˜**: GitHub Issues ë˜ëŠ” íŒ€ ì±„ë„

